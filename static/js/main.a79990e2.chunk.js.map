{"version":3,"sources":["img/bitd_s4_map.jpg","SignIn.tsx","Clock.tsx","ClockBar.tsx","ClockPage.tsx","Util.tsx","MapPage.tsx","EditNote.tsx","NotesPage.tsx","Pages.tsx","Dice.tsx","Notes.tsx","Tools.tsx","Hud.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","SignIn","props","state","email","pw","handleEmailChange","bind","handlePwChange","handleSubmit","event","this","setState","target","value","firebase","signInWithEmailAndPassword","catch","error","console","log","message","preventDefault","onSubmit","type","onChange","React","Clock","c","progress","n_slices","w","theta","clock","slices","push","x","y","radius","fill","stroke","strokeWidth","onClick","incr_func","onContextMenu","e","evt","i","h","angle","rotation","key","toString","className","width","height","desc","PureComponent","ClockBar","clocks","Array","from","map","pair","id","click_func","owner","delete_func","window","prompt","Number","new_func","ClockPage","group_clocks","Map","world_event_clocks","player_clocks","unsub_fns","handle_clock_click","new_clock","delete_clock","loadData","fn","unsub_funcs","db","collection","players","orderBy","onSnapshot","snap","docs","doc","data","doc_ids","gc","forEach","set","concat","length","add","timestamp","Timestamp","now","incr","user","alert","button","clock_doc","get","then","a","old_clock","incr_clock","delete","ordered_players","arr","item","target_idx","indexOf","cpy","slice","splice","util","current_player","get_clocks","MapPage","element","createRef","landmarks","open_id","img_height","img_width","panel_open","selected_landmark","handleMapClick","newLandmark","deleteLandmark","updateDimensions","addEventListener","removeEventListener","prevProps","page_active","current","clientHeight","clientWidth","unsub_func","gl","closePanel","rect","getBoundingClientRect","clientX","left","offsetWidth","clientY","top","offsetHeight","name","color","docRef","selectLandmark","showPanel","merge","lm","style","position","ref","src","cursor","landmark","transform","Provider","size","display","flexDirection","justifyContent","minWidth","minHeight","backgroundColor","border","padding","colors","onChangeComplete","changeColor","EditNote","note","handle_change","field","updateState","delete_note","cancel_edit_note","save_note","prevState","color_map","NotesPage","notes","types","filter","sort","editing_notes","new_note","edit_note","display_default_note","Set","types_arr","wordBreak","overflow","whiteSpace","notes_arr","b","localeCompare","includes","t","pages","Pages","current_page","page","Dice","dice","index","max","Math","floor","random","num","handle_die_click","empty_dice","delete_die","new_die","Notes","rows","tools","Tools","current_tool","renderSwitch","option","Hud","unsub_auth","onAuthStateChanged","change_player","currentTarget","player","Boolean","location","hostname","match","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a79990e2.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bitd_s4_map.f5c67ae5.jpg\";","import * as React from \"react\";\nimport * as firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\ninterface State {\n    email: string,\n    pw: string,\n}\n\nclass SignIn extends React.PureComponent<{}, State> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            email: \"\",\n            pw: \"\",\n        };\n\n        this.handleEmailChange = this.handleEmailChange.bind(this);\n        this.handlePwChange = this.handlePwChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleEmailChange(event: React.ChangeEvent<HTMLInputElement>) {\n        this.setState({\n            email: event.target.value\n        });\n    }\n\n    handlePwChange(event: React.ChangeEvent<HTMLInputElement>) {\n        this.setState({\n            pw: event.target.value\n        });\n    }\n\n    handleSubmit(event: React.ChangeEvent<HTMLFormElement>) {\n        firebase.auth().signInWithEmailAndPassword(this.state.email, this.state.pw).catch(function(error) {\n            console.log(error.message);\n        })\n        event.preventDefault();\n    }\n\n    render() {\n        return (\n          <form onSubmit={this.handleSubmit}>\n            <label>\n              E-mail:\n              <input type=\"text\" value={this.state.email} onChange={this.handleEmailChange} />\n              Password:\n              <input type=\"password\" value={this.state.pw} onChange={this.handlePwChange}  />\n            </label>\n            <input type=\"submit\" value=\"Sign In\" />\n          </form>\n        );\n    }\n}\n\nexport default SignIn;","import React from \"react\";\nimport Konva from \"konva\";\nimport { Stage, Layer, Wedge, Circle } from \"react-konva\";\nimport { Clock_t } from \"./Types\";\n\ninterface Props {\n    clock: Clock_t;\n    incr_func: (e: Konva.KonvaEventObject<MouseEvent>) => void;\n}\n\nclass Clock extends React.PureComponent<Props, {}> {\n    public is_full(c: Clock_t): boolean {\n        return c.progress === c.n_slices;\n    }\n\n    public is_empty(c: Clock_t): boolean {\n        return c.progress === 0;\n    }\n\n    public render() {\n        const w = 130;\n        const h = 130;\n\n        const theta = 360 / this.props.clock.n_slices;\n        let slices = [];\n\n        if (this.props.clock.n_slices === 1) {\n            slices.push(\n                <Circle\n                    x={w/2}\n                    y={w/2}\n                    radius={60}\n                    fill={this.props.clock.progress === 1 ? \"gray\" : \"white\"}\n                    stroke={\"black\"}\n                    strokeWidth={2}\n                    onClick={this.props.incr_func}\n                    onContextMenu={e => {\n                        // Suppress right click menu on clocks\n                        e.evt.preventDefault();\n                    }}\n                />\n            );\n        } else {\n            for (let i = 0; i < this.props.clock.n_slices; i++) {\n                slices.push(\n                    <Wedge\n                        x={w / 2}\n                        y={h / 2}\n                        radius={60}\n                        angle={theta}\n                        fill={i < this.props.clock.progress ? \"gray\" : \"white\"}\n                        stroke={\"black\"}\n                        strokeWidth={2}\n                        rotation={i * theta - 90}\n                        onClick={this.props.incr_func}\n                        onContextMenu={e => {\n                            // Suppress right click menu on clocks\n                            e.evt.preventDefault();\n                        }}\n                        key={i.toString()}\n                    />\n                );\n            }\n        }\n\n        return (\n            <div className=\"flex flex-column mw5\">\n                <div className=\"pa3 mw5 self-center\">\n                    <Stage width={w} height={h}>\n                        <Layer>{slices}</Layer>\n                    </Stage>\n                </div>\n                <p className=\"tc pa1 ws-normal\">{this.props.clock.desc}</p>\n            </div>\n        );\n    }\n}\n\nexport default Clock;\n","import React from \"react\";\nimport { Clock_t } from \"./Types\";\nimport Clock from \"./Clock\";\n\ninterface Props {\n    clocks: Map<string, Clock_t>;\n    owner: string;\n    click_func: Function;\n    new_func: Function;\n    delete_func: Function;\n}\n\nfunction ClockBar(props: Props) {\n    const clocks = Array.from(props.clocks).map(pair => {\n        const id = pair[0];\n        const clock = pair[1];\n\n        return (\n                <div key={id} className=\"flex flex-column justify-between outline\">\n                    <div className=\"\">\n                        <Clock\n                            clock={clock}\n                            incr_func={e => props.click_func(e, props.owner, id)}\n                        />\n                    </div>\n                    <div className=\"tc pb2\">\n                            <button className=\"ba pointer ph1\"\n                               onClick={() => {\n                                   props.delete_func(id, props.owner);\n                               }}\n                            >Delete</button>\n                    </div>\n                </div>\n        );\n    });\n\n    return (\n        <div>\n            <div className=\"p0\">\n                <p className=\"ttc f3\">{props.owner}</p>\n            </div>\n            <div className=\"flex bt bb\">\n                <div className=\"flex flex-column tc bg-blue pointer justify-center\"\n                     onClick={ () => {\n                         const desc = window.prompt(\"What's the clock for?\", \"Nothin'\");\n                         if(!desc){return;}\n                         const n_slices = Number(window.prompt(\"How many slices?\", \"4\"));\n                         if(!n_slices){return;}\n                         props.new_func(props.owner, desc, n_slices);\n                     }}\n                >\n                    <div className=\"f2 w3\">+</div>\n                </div>\n\n                <div className=\"flex overflow-x-scroll items-top w-100\">\n                    {clocks}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default ClockBar;\n","import React from \"react\";\nimport * as util from \"./Util\";\nimport { Clock_t } from \"./Types\";\nimport ClockBar from \"./ClockBar\";\nimport * as firebase from \"firebase/app\";\nimport Konva from \"konva\";\n\n\ninterface State {\n    group_clocks: Map<string, Clock_t>;\n    world_event_clocks: Map<string, Clock_t>;\n    player_clocks: { [name: string]: Map<string, Clock_t> };\n    unsub_fns: Function[];\n}\n\ninterface Props {\n    players: string[];\n    user: firebase.User | null;\n    current_player: string;\n    unsub_fns: Function[];\n    db:firebase.firestore.Firestore;\n}\n\nclass ClockPage extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            group_clocks: new Map(),\n            world_event_clocks: new Map(),\n            player_clocks: {\n                \"bricks\": new Map(),\n                \"shivers\": new Map(),\n                \"dogs\": new Map(),\n                \"tick tock\": new Map(),\n            },\n            unsub_fns:[]\n        };\n        this.handle_clock_click = this.handle_clock_click.bind(this);\n        this.new_clock = this.new_clock.bind(this);\n        this.delete_clock = this.delete_clock.bind(this);\n    }\n\n    public componentDidMount(){\n        this.loadData();\n    }\n\n    public componentWillUnmount() {\n        for (const fn of this.state.unsub_fns) {\n            fn();\n        }\n    }\n\n    private loadData() {\n        let unsub_funcs: Function[] = [];\n\n        for (let i = 0; i < this.props.players.length; i++) {\n            unsub_funcs[i] = this.props.db.collection(this.props.players[i] + \"_clocks\")\n                .orderBy(\"timestamp\", \"desc\")\n                .onSnapshot(snap => {\n                    const clocks = snap.docs.map(doc => doc.data() as Clock_t);\n                    const doc_ids = snap.docs.map(doc => doc.id);\n\n                    let gc = new Map<string, Clock_t>();\n                    doc_ids.forEach((id, i) => { gc.set(id, clocks[i])});\n\n                    if (this.props.players[i] === \"group\") {\n                        this.setState({\n                            group_clocks: gc,\n                        });\n                    } else if (this.props.players[i] === \"world events\") {\n                        this.setState({\n                            world_event_clocks: gc,\n                        });\n                    } else {\n                        this.setState((state, props) => {\n                            return {\n                                ...state,\n                                player_clocks: {\n                                    ...state.player_clocks,\n                                    [this.props.players[i]]: gc,\n                                }\n                            }\n                        })\n                    }\n                });\n\n            this.setState((state, props) => {\n                return {\n                    ...state,\n                    unsub_fns: state.unsub_fns.concat(unsub_funcs),\n                }\n            });\n        }\n    }\n    \n    private new_clock(owner: string, desc: string, n_slices: number) {\n        this.props.db.collection(owner + \"_clocks\").add({\n            desc: desc,\n            n_slices: n_slices,\n            progress: 0,\n            timestamp: firebase.firestore.Timestamp.now(),\n        })\n    }\n\n    private incr_clock(c: Clock_t, incr: 1 | -1): Clock_t {\n        // Ignore increment/decrement past max value\n        if ((incr === 1 && c.n_slices === c.progress) ||\n            (incr === -1 && c.progress === 0))\n        {\n            return c;\n        }\n\n        return {\n            ...c,\n            progress: c.progress + incr,\n            n_slices: c.n_slices,\n        };\n    }\n\n    private handle_clock_click(evt: Konva.KonvaEventObject<MouseEvent>, owner: string, id: string) {\n        if (this.props.user === null) {\n            alert(\"Error: You're not logged in! AaaAAh!\");\n        }\n\n        let e = evt.evt; // the underlying js event\n        e.preventDefault();\n\n        // Ignore clicks with buttons other than left or right mb\n        if (e.button !== 0 && e.button !== 2) {\n            return;\n        }\n\n        const incr = e.button === 0 ? 1 : -1;\n\n        // set the new clock\n        const clock_doc = this.props.db.collection(owner + \"_clocks\").doc(id);\n\n        clock_doc.get().then(a => {\n            const old_clock = a.data() as Clock_t;\n            clock_doc.set(this.incr_clock(old_clock, incr))\n        });\n    }\n\n    private delete_clock(id: string, owner: string) {\n        this.props.db.collection(owner + \"_clocks\").doc(id).delete();\n    }\n\n    render(){\n        const ordered_players = [\"world events\", \"group\"].concat(util.bring_to_front(this.props.players.slice(2), this.props.current_player));\n\n        let get_clocks = (owner: string) => {\n            if (owner === \"group\") {\n                return this.state.group_clocks;\n            } else if (owner === \"world events\") {\n                return this.state.world_event_clocks;\n            } else {\n                return this.state.player_clocks[owner];\n            }\n        }\n\n        return (\n            <div>\n                {ordered_players.map(owner => {\n                    return <div key={owner} className=\"\">\n                        <ClockBar owner={owner}\n                                  clocks={get_clocks(owner)}\n                                  click_func={this.handle_clock_click}\n                                  new_func={this.new_clock}\n                                  delete_func={this.delete_clock}\n                                  />\n                    </div>\n                })}\n            </div>\n        );\n    }\n}\n\nexport default ClockPage;\n","function bring_to_front(arr: string[], item: string): string[] {\n    const target_idx = arr.indexOf(item);\n    // arr.splice(target_idx, 1);\n    // arr.splice(0, 0, item);\n    // return arr;\n    let cpy = arr.slice(0);\n    cpy.splice(target_idx, 1);\n    cpy.splice(0, 0, item);\n    return cpy;\n};\n\nfunction random_int(max:number){\n    return Math.floor(Math.random() * Math.floor(max));\n}\n\nexport {bring_to_front, random_int};","import React from \"react\";\nimport { CirclePicker } from \"react-color\";\nimport map from \"./img/bitd_s4_map.jpg\"\nimport { Landmark_t } from \"./Types\";\nimport * as firebase from \"firebase/app\";\nimport {FaMapMarkerAlt} from 'react-icons/fa';\nimport { IconContext } from \"react-icons\";\n\ninterface State {\n    landmarks: Map<string, Landmark_t>;\n    unsub_fns: Function[];\n    open_id:string;\n    img_height:number;\n    img_width:number;\n    panel_open:boolean;\n    selected_landmark:string;\n}\n\ninterface Props {\n    players: string[];\n    user: firebase.User | null;\n    current_player: string;\n    unsub_fns: Function[];\n    db:firebase.firestore.Firestore;\n    page_active:boolean;\n}\n\nclass MapPage extends React.PureComponent<Props, State> {\n\n    private element = React.createRef<HTMLImageElement>();\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            landmarks:new Map(),\n            unsub_fns:[],\n            open_id:\"\",\n            img_height:0,\n            img_width:0,\n            panel_open:false,\n            selected_landmark:\"\",\n        };\n        this.handleMapClick = this.handleMapClick.bind(this);\n        this.newLandmark = this.newLandmark.bind(this);\n        this.deleteLandmark = this.deleteLandmark.bind(this);\n    }\n\n    public componentDidMount(){\n        this.loadData();\n        this.updateDimensions();\n        window.addEventListener(\"resize\", this.updateDimensions.bind(this));\n    }\n\n    public componentWillUnmount() {\n        for (const fn of this.state.unsub_fns) {\n            fn();\n        }\n        window.removeEventListener(\"resize\", this.updateDimensions.bind(this));\n    }\n\n    componentDidUpdate(prevProps:Props) {\n        if (this.props.page_active !== prevProps.page_active) {\n            this.updateDimensions()\n        }\n    }\n\n    private updateDimensions() {\n        const element = this.element.current!\n        this.setState({img_height:element.clientHeight, img_width:element.clientWidth})\n    }\n\n    private loadData() {\n        let unsub_func: Function = this.props.db.collection(\"landmarks\")\n            .orderBy(\"timestamp\", \"desc\")\n            .onSnapshot(snap => {\n                const landmarks = snap.docs.map(doc => doc.data() as Landmark_t);\n                const doc_ids = snap.docs.map(doc => doc.id);\n                let gl = new Map<string, Landmark_t>();\n                doc_ids.forEach((id, i) => { gl.set(id, landmarks[i])});\n                this.setState({\n                    landmarks: gl,\n                }, ()=>console.log(this.state.landmarks));\n            });\n\n        this.setState((state, props) => {\n            return {\n                ...state,\n                unsub_fns: state.unsub_fns.concat(unsub_func),\n            }\n        });\n    }\n\n    private handleMapClick(e:React.MouseEvent<HTMLElement>){\n        if(this.state.panel_open){\n            this.closePanel();\n        }else{\n            let rect = (e.target as HTMLElement).getBoundingClientRect();\n            let x:number = (e.clientX - rect.left)/(e.target as HTMLElement).offsetWidth;\n            let y:number = (e.clientY - rect.top)/(e.target as HTMLElement).offsetHeight;\n            let name = window.prompt(\"What would you like to call this landmark?\", \"[N/A]\");\n            if(!name){return;}\n            this.newLandmark(name,x,y);\n        }\n    }\n\n    private newLandmark(name:string, x:number, y:number){\n        this.props.db.collection(\"landmarks\").add({\n            name:name,\n            x:x,\n            y:y,\n            desc:\"\",\n            timestamp: firebase.firestore.Timestamp.now(),\n            color:\"#f44336\"\n        }).then(docRef => {\n            this.selectLandmark(docRef.id)\n        })\n        .catch(function(error) {\n            console.error(\"Error adding document: \", error);\n        });\n    }\n\n    private deleteLandmark(id:string){\n        this.props.db.collection(\"landmarks\").doc(id).delete();\n        this.closePanel();\n    }\n\n    private selectLandmark(id:string){\n        if(id===this.state.selected_landmark){\n            this.closePanel();\n        }else{\n            this.setState({selected_landmark:id});\n            this.showPanel(id);\n        }\n    }\n\n    private showPanel(id:string){\n        // this.props.db.collection(\"landmarks\").doc(id).delete();\n        this.setState({panel_open:true})\n    }\n\n    private closePanel(){\n        // this.props.db.collection(\"landmarks\").doc(id).delete();\n        this.setState({panel_open:false, selected_landmark:\"\"})\n    }\n\n    private changeColor(id:string, color:string){\n        console.log(color)\n        const landmark = this.props.db.collection(\"landmarks\").doc(this.state.selected_landmark);\n        landmark.set({\n            color:color\n        }, { merge: true })\n    }\n\n    render(){\n        let lm = this.state.landmarks.get(this.state.selected_landmark)\n        let name = lm?.name ? lm!.name : \"[N/A]\"\n        let x = lm?.x!*this.state.img_width\n        let y = lm?.y!*this.state.img_height\n        let left = x!>.5*this.state.img_width?\"-105%\":\"5%\";\n        let top = y!>.5*this.state.img_height?\"-125%\":\"5%\";\n        return (\n            <div style={{position:\"relative\"}}>\n                <img ref={this.element}\n                    className = \"w-100\" \n                    src={map}  \n                    style={{position:\"absolute\", cursor: this.state.panel_open ? \"auto\" : \"cell\"}}\n                    onClick={e => this.handleMapClick(e)}/>\n\n                {\n                    Array.from(this.state.landmarks).map((pair)=>{\n                        const id = pair[0];\n                        const landmark = pair[1];\n                        return(\n                            <div \n                                style={{position:\"absolute\", left:this.state.img_width*landmark.x, top:this.state.img_height*landmark.y, transform:\"translateY(-100%) translateX(-50%)\"}}\n                            >\n                                <IconContext.Provider value={{size:this.state.selected_landmark===id?\"3em\":\"2em\", color: landmark.color?landmark.color:\"red\", }}>\n                                    <FaMapMarkerAlt \n                                        onClick={()=>this.selectLandmark(id)} \n                                        className=\"pointer\"\n                                    />\n                                </IconContext.Provider>\n                            </div>\n                        )\n                    })\n                }\n\n                <div style={{position:\"absolute\", display: this.state.panel_open ? 'flex' : 'none', \n                    flexDirection:\"column\", justifyContent:\"space-between\",\n                    left: x, top:y, transform: \"translateY(\"+top+\") translateX(\"+left+\")\",\n                    width:\"40%\", minWidth:\"350px\", minHeight:\"200px\", \n                    backgroundColor:\"white\", border:\"1px solid black\", padding:\"5px\",\n                }}>\n                    <div>\n                        <div className=\"flex flex-row content-between\">\n                            <button className=\"bg-grey flex-auto pointer tc br\"\n                                    onClick={()=>this.closePanel()}\n                            >\n                                Close\n                            </button>\n                            <button className=\"bg-red flex-auto pointer tc br\"\n                                    onClick={()=>this.deleteLandmark(this.state.selected_landmark)}\n                            >\n                                Delete\n                            </button>\n                        </div>\n                        <h1 className=\"ma1\">{name}</h1>\n                    </div>\n                    <div style={{width:\"100%\"}}>\n                        <hr/>\n                        <CirclePicker\n                            colors={[\"#f44336\",  \"#9c27b0\",  \"#3f51b5\",  \"#03a9f4\",  \"#009688\",  \"#8bc34a\", \"#ff9800\",]}\n                            width=\"350px\"\n                            color={lm?.color}\n                            onChangeComplete={(c,e) =>{ this.changeColor(this.state.selected_landmark, c[\"hex\"])}}\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default MapPage;\n\n","import React from \"react\";\nimport { Notes_t } from \"./Types\";\n\ninterface Props {\n    id:string;\n    note: Notes_t;\n    save_note:Function;\n    cancel_edit_note:Function;\n    delete_note:Function;\n}\n\ninterface State {\n    name:string;\n    type:string;\n    desc:string;\n}\n\nclass EditNote extends React.PureComponent<Props,  State> {\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            name:this.props.note.name,\n            type:this.props.note.type,\n            desc:this.props.note.desc\n        };\n        this.handle_change = this.handle_change.bind(this)\n    }\n\n    private handle_change(event:React.ChangeEvent<HTMLInputElement>|React.ChangeEvent<HTMLTextAreaElement>|React.ChangeEvent<HTMLSelectElement>, field:\"name\"|\"type\"|\"desc\"){\n        this.setState(updateState(field, event.target.value!))\n    }\n\n    public render() {\n        return <div className=\"w-100\" >\n            <div className=\"w-100 flex justify-between\">\n                <div className=\"flex flex-wrap\" style={{justifyContent:\"space-between\"}}>\n                    <button className=\"bg-red  pointer tc br\"\n                            onClick={()=>this.props.delete_note(this.props.id)}\n                    >\n                        Delete\n                    </button>\n                </div>\n            </div>\n            <br/>\n            <label>\n            Name: <input type=\"text\" value={this.state.name} onChange={(e)=>this.handle_change(e, \"name\")} />\n            </label>\n            <br/>\n            <label>\n            Type: <select  value={this.state.type}  onChange={(e)=>this.handle_change(e, \"type\")} >\n                <option value=\"Misc\">Misc</option>\n                <option value=\"Person\">Person</option>\n                <option value=\"Place\">Place</option>\n                <option value=\"Boogins\">Boogins</option>\n                <option value=\"Item\">Item</option>\n                <option value=\"Concept\">Concept</option>\n                <option value=\"Event\">Event</option>\n            </select>\n            </label>\n            <br/>\n            <label>\n            Description: \n            <br/>\n            <textarea value={this.state.desc} onChange={(e)=>this.handle_change(e, \"desc\")} />\n            </label>\n            <div className=\"w-100 flex justify-between\">\n                <div className=\"flex flex-wrap\" style={{justifyContent:\"space-around\"}}>\n                    <button className=\"bg-grey pointer tc br\"\n                            onClick={()=>this.props.cancel_edit_note(this.props.id)}\n                    >\n                        Cancel\n                    </button>\n                    <button className=\"bg-blue pointer tc br\"\n                            onClick={()=>{\n                                this.props.save_note(this.props.id, this.state.name, this.state.type, this.state.desc)\n                                this.props.cancel_edit_note(this.props.id)\n                            }}\n                    >\n                        Save\n                    </button>\n                </div>\n            </div>\n        </div>\n    }\n}\n\nconst updateState = <T extends string>(key: keyof State, value: T) => (\n  prevState: State\n): State => ({\n  ...prevState,\n  [key]: value\n})\n\nexport default EditNote;\n","import React from \"react\";\nimport * as util from \"./Util\";\nimport { Notes_t } from \"./Types\";\nimport EditNote  from \"./EditNote\";\nimport * as firebase from \"firebase/app\";\nimport Konva from \"konva\";\n\n\ninterface State {\n    notes: Map<string, Notes_t>;\n    types: string[];\n    filter:string;\n    sort:string;\n    editing_notes: string[];\n    unsub_fns: Function[];\n}\n\ninterface Props {\n    players: string[];\n    user: firebase.User | null;\n    current_player: string;\n    unsub_fns: Function[];\n    db:firebase.firestore.Firestore;\n}\n\nconst color_map:Map<string,string> = new Map([\n    [\"Misc\",\"#ffadad\"],\n    [\"Person\",\"#ffd6a5\"],\n    [\"Place\",\"#fdffb6\"],\n    [\"Boogins\",\"#caffbf\"],\n    [\"Concept\",\"#9bf6ff\"],\n    [\"Item\",\"#a0c4ff\"],\n    [\"Event\",\"#ffc6ff\"],\n])\n\nclass NotesPage extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            notes:new Map(),\n            types: [],\n            filter:\"All\",\n            sort:\"Date\",\n            editing_notes: [],\n            unsub_fns:[]\n        };\n        this.save_note = this.save_note.bind(this)\n        this.new_note = this.new_note.bind(this);\n        this.delete_note = this.delete_note.bind(this);\n        this.edit_note = this.edit_note.bind(this);\n        this.cancel_edit_note = this.cancel_edit_note.bind(this);\n        this.display_default_note = this.display_default_note.bind(this);\n    }\n\n    public componentDidMount(){\n        this.loadData();\n    }\n\n    public componentWillUnmount() {\n        for (const fn of this.state.unsub_fns) {\n            fn();\n        }\n    }\n\n    private loadData() {\n        let unsub_func: Function = this.props.db.collection(\"notes\")\n            .orderBy(\"timestamp\", \"desc\")\n            .onSnapshot(snap => {\n                const notes = snap.docs.map(doc => doc.data() as Notes_t);\n                const doc_ids = snap.docs.map(doc => doc.id);\n                let gl = new Map<string, Notes_t>();\n                let types = new Set([\"All\"]);\n                doc_ids.forEach((id, i) => { \n                    gl.set(id, notes[i]);\n                    types.add(notes[i].type)\n                });\n                let types_arr = Array.from(types) as string[]\n                types_arr.sort()\n                this.setState({\n                    notes: gl,\n                    types: types_arr,\n                })\n            });\n\n        this.setState((state, props) => {\n            return {\n                ...state,\n                unsub_fns: state.unsub_fns.concat(unsub_func),\n            }\n        });\n    }\n    \n    private new_note(name: string, type:string, desc:string,) {\n        this.props.db.collection(\"notes\").add({\n            name:name,\n            type:type,\n            desc:desc,\n            timestamp: firebase.firestore.Timestamp.now(),\n        })\n    }\n\n    private save_note(id: string, name: string, type:string, desc:string,) {\n        const note_doc = this.props.db.collection(\"notes\").doc(id);\n        note_doc.set({\n            name:name,\n            type:type,\n            desc:desc,\n            timestamp: firebase.firestore.Timestamp.now(),\n        })\n    }\n\n    private delete_note(id: string) {\n        this.props.db.collection(\"notes\").doc(id).delete();\n    }\n\n    private edit_note(id:string){\n        this.setState((state)=>{\n            return({\n                ...state, \n                editing_notes:state.editing_notes.concat([id])\n            })\n        })\n    }\n\n    private cancel_edit_note(id:string){\n        this.setState((state)=>{\n            let new_editing_notes = state.editing_notes.filter(e => e !== id)\n            return({\n                editing_notes:new_editing_notes\n            })\n        })\n    }\n\n    private display_default_note(id:string, note:Notes_t){\n        return <div style={{wordBreak:\"break-word\", overflow:\"auto\"}}>\n            <div className=\"w-100 flex justify-between\"\n                style = {{backgroundColor:color_map.get(note.type)}}\n            >\n                <div>\n                    <h1 className=\"mv1\">{note.name}</h1>\n                </div>\n                <button className=\"bg-grey pointer tc br ml3\"\n                        onClick={()=>this.edit_note(id)}\n                >\n                    Edit\n                </button>\n            </div>\n            <hr/>\n            <h2 className=\"mv1\">{note.type}</h2>\n            <p style={{whiteSpace: \"pre-wrap\"}}>{note.desc}</p>\n        </div>\n    }\n\n    render(){\n        const notes_arr = Array.from(this.state.notes)\n        if(this.state.sort == \"Name\"){\n            notes_arr.sort((a,b)=>{return a[1].name.localeCompare(b[1].name)})\n        }else if(this.state.sort == \"Type\"){\n            notes_arr.sort((a,b)=>{return a[1].type.localeCompare(b[1].type)})\n        }\n        const notes = notes_arr.map((pair) => {\n            const id = pair[0]\n            const note = pair[1]\n            if(this.state.filter === \"All\" || this.state.filter ==note.type){\n                return(\n                    <div \n                        key={id} \n                        className=\"mw6 h5 pa1 ba ma2 flex flex-column\"\n                    >\n                    { this.state.editing_notes.includes(id) ?\n                            <EditNote id={id} note={note} save_note={this.save_note} delete_note={this.delete_note} cancel_edit_note={this.cancel_edit_note}/>\n                        :\n                            this.display_default_note(id, note)\n                    }\n                    </div>\n                )\n            }\n        })\n\n        return (\n            <div\n                className=\"flex flex-wrap\"\n            >\n                <div \n                    className=\"mw6 h5 pa1 ba ma2 flex flex-column bg-yellow\"\n                >\n                    <div className=\"flex-auto overflow-y-auto \">\n                        <button className=\"bg-blue f3 flex-auto pointer tc br\"\n                                onClick={()=>{\n                                    this.new_note(\"New Note\", \"Misc\", \"Description\")\n                                }}\n                        >\n                            NEW NOTE\n                        </button>\n                        <h2>Filter:</h2>\n                        <select onChange={(e)=>this.setState({filter:e.target.value})}>\n                            {\n                            this.state.types.map(t => {\n                                return(\n                                    <option value={t}>{t}</option>\n                                )\n                            })\n                        }\n                        </select>\n                        <h2>Sort:</h2>\n                        <select onChange={(e)=>this.setState({sort:e.target.value})}>\n                            <option value=\"Date\">Date</option>\n                            <option value=\"Name\">Name</option>\n                            <option value=\"Type\">Type</option>\n                        </select>\n                    </div>\n                </div>\n\n                {notes}\n            </div>\n        );\n    }\n}\n\nexport default NotesPage;\n","import * as React from \"react\";\nimport * as firebase from \"firebase/app\";\nimport ClockPage from \"./ClockPage\"\nimport MapPage from \"./MapPage\"\nimport NotesPage from \"./NotesPage\"\nimport \"firebase/auth\";\n\ninterface State {\n    current_page:string;\n}\n\ninterface Props {\n    players: string[];\n    user: firebase.User | null;\n    current_player: string;\n    unsub_fns: Function[];\n    db:firebase.firestore.Firestore;\n}\n\nconst pages:string[] = [\"Clocks\", \"Map\", \"Notes\"];\n\nclass Pages extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            current_page:pages[0],\n        };\n    }\n\n    render() {\n        return(\n            <div className=\"pa1 w-100 vh-100 overflow-y-scroll\" >\n                <div className=\"flex flex-wrap\" style={{justifyContent:\"space-around\"}}>\n                    {pages.map(page =>{return(\n                        <button className=\"bg-blue f3 flex-auto pointer tc br\"\n                                onClick={()=>this.setState({current_page:page})}\n                        >\n                            {page}\n                        </button>\n                    )})}\n                </div>\n                <hr/>\n                <div style={{display: this.state.current_page===\"Clocks\" ? 'initial' : 'none' }}>\n                    <ClockPage {...this.props}/>\n                </div>\n                <div style={{display: this.state.current_page===\"Map\" ? 'initial' : 'none' }}>\n                    <MapPage page_active={this.state.current_page==\"Map\"} {...this.props}/>\n                </div>\n                <div style={{display: this.state.current_page===\"Notes\" ? 'initial' : 'none' }}>\n                    <NotesPage {...this.props}/>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Pages;\n","import React from \"react\";\nimport * as util from \"./Util\";\n\n\ninterface State {\n    dice:number[];\n}\n\nclass Dice extends React.PureComponent<{}, State> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            dice: [1],\n        };\n    }\n\n    private new_die() {\n        this.setState((state)=>({dice:[...state.dice, 1]}));\n    }\n\n    private delete_die() {\n        this.setState((state)=>({dice:state.dice.slice(0,-1)}));\n    }\n\n    private empty_dice() {\n        this.setState((state)=>({dice:[]}));\n    }\n\n    private handle_die_click(index:number) {\n        this.setState((state)=>{\n            const dice = state.dice.map((item, i) => {\n                if (i === index) {\n                  return util.random_int(6)+1;\n                } else {\n                  return item;\n                }\n            });\n            return({dice:dice})\n        });\n    }\n\n    render(){\n        const dice = this.state.dice.map((num, index) => {\n            return(\n                <div className=\"w3 h3 ba br2 pointer bg-yellow tc flex flex-column justify-center ma2\"\n                     onClick={()=>this.handle_die_click(index)}\n                >\n                    <div className=\"f2\">{num}</div>\n                </div>\n            )\n        });\n\n        return (\n        <div>\n            <h3 className=\"tc\">Here roll some dice why not?</h3>\n            <div className=\"flex\" style={{justifyContent:\"space-around\"}}>\n                <button className=\"bg-blue f2 flex-auto pointer tc br\"\n                    onClick = {()=>this.empty_dice()}\n                >\n                    0\n                </button>\n                <button className=\"bg-blue f2 flex-auto pointer tc br\"\n                    onClick = {()=>this.delete_die()}\n                >\n                    -\n                </button>\n                <button className=\"bg-blue f2 flex-auto pointer tc\"\n                    onClick = {()=>this.new_die()}\n                >\n                    +\n                </button>\n            </div>\n            <div className=\"flex flex-wrap justify-around\">\n                {dice}\n            </div>\n            <div className=\"flex\" style={{justifyContent:\"space-around\"}}>\n                <button className=\"bg-blue f2 flex-auto pointer tc br\"\n                    onClick = {()=>{\n                        this.state.dice.map((num, index) => this.handle_die_click(index));\n                    }}\n                >\n                    Roll All\n                </button>\n            </div>\n        </div>\n    );\n    }\n}\n\nexport default Dice;\n","import React from \"react\";\nimport * as util from \"./Util\";\n\n\ninterface State {\n    notes:string;\n}\n\nclass Notes extends React.PureComponent<{}, State> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            notes: \"\",\n        };\n    }\n\n    render(){\n        return (\n            <div className=\"flex\">\n                <textarea className=\"flex-auto\" rows={30}>\n                  This doesn't actually save, so, ya know, don't really use it yet.\n                </textarea>\n            </div>\n        );\n    }\n}\n\nexport default Notes;\n","import * as React from \"react\";\nimport Dice from \"./Dice\"\nimport Notes from \"./Notes\"\n\ninterface State {\n    current_tool:string;\n}\n\nconst tools:string[] = [\"dice\"];\n// const tools:string[] = [\"dice\", \"notes\"];\n\n\nclass Tools extends React.PureComponent<{}, State> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            current_tool:tools[0],\n        };\n        this.renderSwitch = this.renderSwitch.bind(this);\n    }\n\n    renderSwitch(option:string){\n        switch(option){\n            case \"dice\":\n                return(<Dice/>)\n            case \"notes\":\n                return(<Notes/>)\n            default:\n                return(null)\n        }\n    }\n\n    render() {\n        return(\n            <div className=\"pa1\">\n                <Dice/>\n            </div>\n        )\n    }\n}\n\nexport default Tools;","import React from \"react\";\nimport SignIn from \"./SignIn\";\nimport Pages from \"./Pages\";\nimport Tools from \"./Tools\";\nimport * as firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nconst players = [\"group\", \"world events\", \"bricks\", \"shivers\", \"dogs\", \"tick tock\"];\n\ninterface State {\n    user: firebase.User | null;\n    current_player: string;\n    unsub_fns: Function[];\n    db:firebase.firestore.Firestore;\n}\n\n\nclass Hud extends React.PureComponent<{}, State> {\n    constructor(props: {}) {\n        super(props);\n\n        const unsub_auth = firebase.auth().onAuthStateChanged(user => {\n            this.setState({ user: user });\n        });\n\n\n        this.state = {\n            user: null,\n            current_player: \"bricks\",\n            unsub_fns: [unsub_auth],\n            db:firebase.firestore(),\n        };\n\n        this.change_player = this.change_player.bind(this);\n    }\n\n    public componentWillUnmount() {\n        for (const fn of this.state.unsub_fns) {\n            fn();\n        }\n    }\n\n    private change_player(e: React.FormEvent<HTMLSelectElement>) {\n        this.setState({\n            current_player: e.currentTarget.value,\n        });\n    }\n\n    public render() {\n        // if not signed in\n        if (!this.state.user) {\n            return (\n            <div className=\"outline\">\n                <SignIn />\n            </div>\n            );\n        } else { // if signed in\n            return (\n                <div className=\"flex\">\n                    <div className=\"flex flex-column w-80\">\n                        <Pages players={players} {...this.state} />\n                    </div>\n                    <div className=\"flex-column w-20 outline\">\n                        <div className=\"flex flex-wrap\">\n                            <p className=\"f4\">Which one are you?</p>\n                            <select value={this.state.current_player} onChange={this.change_player}>\n                                { players.slice(2).map( player => {\n                                    return <option value={player}>{player}</option>\n                                }) }\n                            </select>\n                        </div>\n                        <Tools/>\n                        <hr/>\n                        <p className=\"b f6 tc\">\n                            Updated 10/6/2020!\n                        </p>\n                    </div>\n                </div>\n            );\n        }\n    }\n}\n\nexport default Hud;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Hud from \"./Hud\";\nimport * as firebase from \"firebase/app\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nvar firebaseConfig = {\n    apiKey: \"AIzaSyAwY_9bJhDtZRn52OWKkU9J3gNklyB2MaU\",\n    authDomain: \"bitd-hud.firebaseapp.com\",\n    databaseURL: \"https://bitd-hud.firebaseio.com\",\n    projectId: \"bitd-hud\",\n    storageBucket: \"bitd-hud.appspot.com\",\n    messagingSenderId: \"87588692405\",\n    appId: \"1:87588692405:web:eb12f6f11340afbc\"\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nReactDOM.render(<Hud />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}